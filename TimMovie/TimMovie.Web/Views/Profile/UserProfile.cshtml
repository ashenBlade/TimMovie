@using TimMovie.Core.Entities.Enums
@model TimMovie.Web.ViewModels.User.UserProfileViewModel

@{
    ViewData["Title"] = "Профиль";
    Layout = "_Layout";
}

<div class="d-flex flex-column">
<div class="d-flex mt-3">
<div class="d-flex flex-column [ left_container_profile ]">
    <div class="d-flex flex-column p-3  [ profile_card ]">
        <div class="pe-3">
            <img class="mw-100" src="@Model.UserInfo.PathToPhoto"/>
        </div>
        <div class="mt-3 [ nickname_in_profile ]">@Model.UserInfo.DisplayName</div>
        <div class="d-flex flex-column mt-2 align-items-start [ status_in_profile ]">
            @switch (Model.UserInfo.Status)
            {
                case UserStatus.Watching:
                    <div class="d-flex align-items-center [ watching_status ]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                        </svg>
                        <div class="ms-2">Смотрит фильм:</div>
                    </div>
                    <a class="ms-4 [ filmLinkInProfile ]" href="/">@(Model.UserInfo.FilmForStatusDto?.Title ?? "Фильм не известен")</a>
                    break;
                case UserStatus.Offline:
                    <div class="d-flex align-items-center [ offline_status ]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-wifi-off" viewBox="0 0 16 16">
                            <path d="M10.706 3.294A12.545 12.545 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c.63 0 1.249.05 1.852.148l.854-.854zM8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065 8.448 8.448 0 0 1 3.51-1.27L8 6zm2.596 1.404.785-.785c.63.24 1.227.545 1.785.907a.482.482 0 0 1 .063.745.525.525 0 0 1-.652.065 8.462 8.462 0 0 0-1.98-.932zM8 10l.933-.933a6.455 6.455 0 0 1 2.013.637c.285.145.326.524.1.75l-.015.015a.532.532 0 0 1-.611.09A5.478 5.478 0 0 0 8 10zm4.905-4.905.747-.747c.59.3 1.153.645 1.685 1.03a.485.485 0 0 1 .047.737.518.518 0 0 1-.668.05 11.493 11.493 0 0 0-1.811-1.07zM9.02 11.78c.238.14.236.464.04.66l-.707.706a.5.5 0 0 1-.707 0l-.707-.707c-.195-.195-.197-.518.04-.66A1.99 1.99 0 0 1 8 11.5c.374 0 .723.102 1.021.28zm4.355-9.905a.53.53 0 0 1 .75.75l-10.75 10.75a.53.53 0 0 1-.75-.75l10.75-10.75z"/>
                        </svg>
                        <div class="ms-2">Не в сети</div>
                    </div>
                    break;
                case UserStatus.Online:
                    <div class="d-flex align-items-center [ online_status ]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="bi bi-person-fill" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                        </svg>
                        <div class="ms-2">Онлайн</div>
                    </div>
                    break;
            }
        </div>
    </div>
    <div class="d-flex flex-column justify-content-center mt-3 [ edit_and_my_film_btn ]">
        @if(Model.IsOwner)
        {
            <div class="d-flex align-items-center">
                <a class="d-flex align-items-center [ edit_profile_btn ]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                    </svg>
                    <div class="ms-2">Редактировать профиль</div>
                </a>
            </div>
        }
        <div class="d-flex align-items-center mt-3">
            <a class="d-flex align-items-center [ edit_profile_btn ]">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-film" viewBox="0 0 16 16">
                    <path d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"/>
                </svg>
                <div class="ms-2">История просмотров</div>
            </a>
        </div>
    </div>
</div>
<div class="d-flex flex-column flex-grow-1 ms-5">
<div class="h3">Последние просмотренные фильмы</div>
@if (Model.FilmCards.Any())
{
    <div class="row row-cols-6 gy-3  gx-4 [ container_film_card ]">
    @foreach (var card in Model.FilmCards)
    {
        await Html.RenderPartialAsync("~/Views/Partials/FilmCard/FilmCard.cshtml", card);
    }
    <div class="col [ film-card ]">
        <div class="position-relative">
            <a href="/ссылка" class="position-absolute [ film-card__more-info-container ]">
                <div class="d-flex flex-column [ film-card__more-info ]">
                    <div class="d-flex flex-column align-items-end">
                        <svg width="2.2em" fill="white" version="1.1" viewBox="0 0 700 700"
                             xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="m536.2 12.824h-372.4c-8.5117 0-15.625 7-15.625 15.625v502.77c0 12.938 14.895 20.328 25.258 12.434l176.62-139.95 176.62 140.28c10.305 7.8945 25.145 0.50391 25.145-12.434l-0.003906-503.11c0-8.625-7-15.625-15.625-15.625zm-15.625 486.98-161-128.3c-5.6016-4.2578-13.328-4.3672-19.039 0l-161.11 127.96v-455.34h341.15z"/>
                        </svg>
                        <svg class="mt-2" width="2.2em" fill="white" version="1.1" viewBox="0 0 700 700"
                             xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="m153.84 102.23c-26.82 21.855-43.027 54.121-44.547 88.68-1.6094 34.418 11.344 67.926 35.684 92.312l180.28 180.28c6.5664 6.5547 15.469 10.234 24.746 10.234s18.18-3.6797 24.746-10.234l180.28-180.28c24.332-24.391 37.285-57.891 35.684-92.305-1.5156-34.562-17.719-66.828-44.535-88.688-24.383-19.027-54.926-28.398-85.785-26.324-30.859 2.0703-59.871 15.445-81.492 37.562l-28.898 28.898-28.898-28.898c-21.617-22.121-50.629-35.496-81.488-37.566-30.859-2.0742-61.398 7.3008-85.777 26.328zm142.52 35.984 41.273 41.273-0.003906-0.003906c3.2812 3.2852 7.7344 5.1289 12.375 5.1289s9.0898-1.8438 12.371-5.1289l41.273-41.273v0.003906c15.434-16.016 36.227-25.781 58.406-27.441 22.18-1.6602 44.191 4.9062 61.836 18.441 19.066 15.633 30.633 38.594 31.852 63.215 1.2148 24.621-8.0312 48.609-25.457 66.047l-180.28 180.28-180.28-180.28c-17.43-17.438-26.676-41.426-25.457-66.051 1.2188-24.621 12.793-47.582 31.859-63.211 15.137-12.332 34.109-18.984 53.637-18.805 25 0.10156 48.945 10.098 66.598 27.805z"/>
                        </svg>
                    </div>
                    <div class="me-2 d-flex flex-column text-end [ film-card__more-info-content ]">
                        <div>Рейтинг: 8/10</div>
                        <div>2002, Рашка, Коммедия</div>
                    </div>
                </div>
            </a>
            <a href="/ссылка" class="mw-100">
                <img class="rounded-2 mw-100 [ film-card__img ]"
                     src="~/img/content/films/13266745.jpg" alt=""/>
            </a>
            <div class="d-flex flex-column [ film-card__under-content ]">
                <a href="/ссылка">
                    <div class="[ film-card__title ]">Человек-паук</div>
                </a>
                @if (true)
                {
                    <div class="text-danger [ film-card__subscribe-text ]">Подписка</div>
                }
                else
                {
                    <div class="[ film-card__subscribe-text ]">Бесплатно</div>
                }
            </div>
        </div>
    </div>
    </div>    
}
else
{
    <div class="d-flex align-items-center justify-content-center flex-grow-1 [ emptyFilmsInProfile ]">
        <svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 460 460" width="2em" xml:space="preserve">
            <g id="XMLID_510_">
                <path id="XMLID_511_" d="M430,460h30V351.327c-8.415,15.951-18.438,30.933-30,44.817V460z"/>
                <path id="XMLID_512_" d="M230,0C102.975,0,0,102.975,0,230s102.975,230,230,230s230-102.975,230-230S357.025,0,230,0z M230,40
        		c30.376,0,55,24.624,55,55s-24.624,55-55,55s-55-24.624-55-55S199.624,40,230,40z M46.607,188.283c0-30.376,24.624-55,55-55
        		c30.375,0,55,24.624,55,55c0,30.375-24.625,55-55,55C71.232,243.283,46.607,218.658,46.607,188.283z M150.649,394.217
        		c-30.375,0-55-24.624-55-55s24.625-55,55-55c30.376,0,55,24.624,55,55S181.025,394.217,150.649,394.217z M230,250
        		c-11.046,0-20-8.954-20-20s8.954-20,20-20s20,8.954,20,20S241.046,250,230,250z M309.351,394.217c-30.376,0-55-24.624-55-55
        		s24.624-55,55-55c30.375,0,55,24.624,55,55S339.727,394.217,309.351,394.217z M358.393,243.283c-30.375,0-55-24.625-55-55
        		c0-30.376,24.625-55,55-55c30.376,0,55,24.624,55,55C413.393,218.658,388.768,243.283,358.393,243.283z"/>
            </g>
        </svg>
        @if (@Model.IsOwner)
        {
            <span class="ms-3">У вас еще нет ни одного просмотренного фильма</span>
        }
        else
        {
            <span class="ms-3">У данного пользователя еще нет ни одного просмотренного фильма</span>
        }
    </div>
}

</div>
</div>
@if (Model.IsOwner)
{
    <div class="d-flex flex-column mt-4">
    <div class="h4">Ваши подписки</div>
    <div class="mt-3">
        @if (!Model.UserSubscribes.Any())
        {
            <div class="d-flex align-items-center justify-content-center [ empty_subscribes_in_profile ] flex-grow-1">
                <a class="d-flex align-items-center [ link_on_subscribe_in_profile ]" title="Купить">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" fill="currentColor" class="bi bi-list-columns" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M0 .5A.5.5 0 0 1 .5 0h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 0 .5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2A.5.5 0 0 1 .5 2h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2A.5.5 0 0 1 .5 4h10a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2A.5.5 0 0 1 .5 6h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2A.5.5 0 0 1 .5 8h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-13 2a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5Zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"/>
                    </svg>
                    <div class="ms-3 mt-1 h4">У вас нет подписок</div>
                </a>
            </div>
        }
        else
        {
            <div class="d-grid [ containerForSubscribeInProfile ]">
                @foreach (var subscribe in Model.UserSubscribes)
                {
                    <div class="d-flex flex-column p-3 [ subscribeCardInProfile ]">
                        <div class="subscribeCardInProfile_title">@subscribe.SubscribeName</div>
                        <div class="mt-2 [ subscribeCardInProfile_description ]">
                            <span class="text-white">Описание:</span> @subscribe.SubscribeDescription
                        </div>
                        <div class="d-flex flex-column mt-3 [ subscribeCardInProfile_duration ]">
                            <div class="">
                                <span class="text-white">Дата начала:</span>
                                <span class="ms-1">@subscribe.StartDay.ToString("dd/MM/yyyy")</span>
                            </div>
                            <div class="mt-1">
                                <span class="text-white">Дата окончания:</span>
                                <span class="ms-1">@subscribe.EndDate.ToString("dd/MM/yyyy")</span>
                            </div>
                        </div>
                    </div>
                }
                <div class="d-flex flex-column p-3 [ subscribeCardInProfile ]">
                    <div class="subscribeCardInProfile_title">Все для своих</div>
                    <div class="mt-2 [ subscribeCardInProfile_description ]">
                        <span class="text-white">Описание:</span> Lorem Ipsum - это текст-"перешагнул в э Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ips...
                    </div>
                    <div class="d-flex flex-column mt-3 [ subscribeCardInProfile_duration ]">
                        <div class="">
                            <span class="text-white">Дата начала:</span>
                            <span class="ms-1">20/04/2022</span>
                        </div>
                        <div class="mt-1">
                            <span class="text-white">Дата окончания:</span>
                            <span class="ms-1">20/05/2022</span>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
}
</div>

@section Styles
{
    <link rel="stylesheet" href="~/css/Profile/Profile.css">
    <link rel="stylesheet" href="~/css/FilmCard/cardStyle.css"/>
    <link rel="stylesheet" href="~/css/Dropdown/dropdownFilters.css"/>
    <link rel="stylesheet" href="~/css/Dropdown/dropdownStyle.css"/>
}
@section Scripts
{
     <script src="~/js/FilmCard/animation_for_film_card.js"></script>
     <script src="~/js/FilmCard/adaptive_container_with_film_card.js"></script>
}
